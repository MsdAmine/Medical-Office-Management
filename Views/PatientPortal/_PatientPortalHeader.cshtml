@model PatientPortalViewModel
@{
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? string.Empty;
    Func<string, string> tabClass = action =>
        string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase)
            ? "bg-white text-blue-700 shadow-lg"
            : "text-white/80 hover:bg-white/10";
}

<div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
            <div>
                <div class="flex items-center space-x-3 mb-4">
                    <div class="h-14 w-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center">
                        <i class="fas fa-user-injured text-2xl"></i>
                    </div>
                    <div>
                        <p class="text-blue-100 text-sm font-medium uppercase tracking-wider">Espace Patient</p>
                        <h1 class="text-3xl md:text-4xl font-bold mt-1">Bonjour, @Model.PatientDisplayName</h1>
                    </div>
                </div>
                <p class="text-blue-100 max-w-2xl">
                    Gérez vos rendez-vous, consultez vos traitements et résultats, et demandez de nouveaux créneaux en toute simplicité.
                </p>
            </div>

            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-5 border border-white/20">
                <div class="grid grid-cols-3 gap-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold mb-1">@Model.UpcomingAppointments.Count()</div>
                        <div class="text-xs text-blue-100">À venir</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold mb-1">@Model.Treatments.Count()</div>
                        <div class="text-xs text-blue-100">Traitements</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold mb-1">@Model.LabResults.Count()</div>
                        <div class="text-xs text-blue-100">Résultats</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-8 flex flex-wrap gap-3">
            <a asp-action="Upcoming" class="px-4 py-2 rounded-xl font-semibold border border-white/20 @tabClass(\"Upcoming\")">
                Rendez-vous à venir
            </a>
            <a asp-action="History" class="px-4 py-2 rounded-xl font-semibold border border-white/20 @tabClass(\"History\")">
                Historique des visites
            </a>
            <a asp-action="Request" class="px-4 py-2 rounded-xl font-semibold border border-white/20 @tabClass(\"Request\")">
                Demander un rendez-vous
            </a>
            <a asp-action="Treatments" class="px-4 py-2 rounded-xl font-semibold border border-white/20 @tabClass(\"Treatments\")">
                Traitements
            </a>
            <a asp-action="Results" class="px-4 py-2 rounded-xl font-semibold border border-white/20 @tabClass(\"Results\")">
                Résultats
            </a>
        </div>
    </div>
</div>
